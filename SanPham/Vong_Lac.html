<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JDT | Công ty chuyên cung cấp trang sức đá quý</title>
    <link rel="stylesheet" href="bootstrap-5.3.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="Font/fontawesome-free-6.5.2-web/css/all.min.css">
    <link rel="stylesheet" href="stylepd.css">
    <link rel="stylesheet" href="styleproduct.css" />
    <link rel="stylesheet" type="text/css" href="slick/slick.css" />
    <link rel="stylesheet" href="styleNSP.css">
    <link rel="stylesheet" href="showSP/styleshow.css">
    <link rel="stylesheet" type="text/css" href="slick/slick-theme.css" />
    <script src="jquery/jquery3.7.1.js"></script>
    <script src="js/script_product.js" defer></script>
</head>

<body>
    <div id="wrapper">
      <div id="phan_dau">
        <!-- Header -->
        <div id="head_link">
          <div id="head_link_left">
            <a href="../index.html" class="header_logo">
              <canvas id="logoCanvas"></canvas>
            </a>
            <ul>
              <li>
                <a id="sub_menu" href="#" style="color: rgb(255, 161, 46)">Trang chủ</a>
              </li>
              <li>
                <a id="sub_menu" href="#">Giới thiệu</a>
              </li>
              <li>
                <a id="sub_menu" href="#">Sản phẩm</a>
                <ul class="dark">
                  <li class="center" style="flex-direction: column-reverse;">
                    <a target="_blank" href="Nhan.html" id="head_link_left_li_title">NHẪN
                      <div class="head_link_left_li_title_hr"></div>
                    </a>
                    <a target="_blank" href="Nhan.html"><div class="sub_menu_bg" style="background-image: url(images/SPN4/1.avif);"></div></a>              
                  </li>
                  <li class="center" style="flex-direction: column-reverse;">
                    <a target="_blank" href="Vong_Lac.html" id="head_link_left_li_title">VÒNG - LẮC
                      <div class="head_link_left_li_title_hr"></div>
                    </a>
                    <a target="_blank" href="Vong_Lac.html"><div class="sub_menu_bg" style="background-image: url(khuyen_mai_list/7.avif);"></div></a>              
                  </li>
                  <li class="center" style="flex-direction: column-reverse;">
                    <a target="_blank" href="Day_Chuyen.html" id="head_link_left_li_title">DÂY CHUYỀN
                      <div class="head_link_left_li_title_hr"></div>
                    </a>
                    <a target="_blank" href="Day_Chuyen.html"><div class="sub_menu_bg" style="background-image: url(images/SPDC1/1.avif);"></div></a>              
                  </li>
                </ul>
              </li>
              <li>
                <a id="sub_menu" href="#">Tin tức</a>
              </li>
              <li>
                <a id="sub_menu" href="#">Liên hệ</a>
              </li>
              <li>
                <a id="sub_menu" href="#">Bộ sưu tập mới</a>
              </li>
            </ul>
          </div>
          <div id="head_link_right">
            <nav class="navbar bg-body-light">
              <div class="container-fluid">
                <form class="d-flex" role="search">
                  <input class="form-control me-2" type="search" placeholder="Tìm kiếm sản phẩm" aria-label="Search" />
                  <button class="btn btn-outline-warning" type="submit">
                    <i class="fa-solid fa-magnifying-glass"></i>
                  </button>
                </form>
              </div>
            </nav>
            <div id="header_box">
              <div id="header_box_Sign_in">
                <!-- Nơi hiển thị tên người dùng -->
                <span id="user_name"></span> 
                <!-- Nút "Đăng xuất" -->
                <button id="logout" style="margin-left: 3% ;display: none;border: transparent;background-color: transparent;vertical-align: top;" title="Đăng xuất">
                  <img src="images/logout.png" style="width: 2.5ch" alt="Đăng Xuất" />
                </button>
              </div>
              <script>
                document.addEventListener('DOMContentLoaded', () => {
                  // Kiểm tra trạng thái đăng nhập
                  const loggedInUser = localStorage.getItem('loggedInUser');
                  const accountLink = document.getElementById('header_box_Sign_in');
                  const logoutLink = document.getElementById('logout');
                  const userNameSpan = document.getElementById('user_name'); // Thêm dòng này
              
                  // Cập nhật nội dung ô "Tài khoản"
                  if (loggedInUser) {
                    // Hiển thị tên người dùng
                    userNameSpan.textContent = `Chào, ${loggedInUser}`; 
                    // Hiển thị nút "Đăng xuất"
                    logoutLink.style.display = 'inline-block'; // Hoặc 'flex'
                  } else {
                    accountLink.textContent = 'Tài khoản';
                    logoutLink.style.display = 'none';
                  }
              
                  // Xử lý sự kiện click vào ô "Tài khoản"
                  accountLink.addEventListener('click', function() {
                    if (!loggedInUser) {
                      // Người dùng chưa đăng nhập, chuyển hướng đến trang đăng nhập
                      window.location.href = '../SignIn-SignUp/index.html';
                    } else {
                      // Người dùng đã đăng nhập, hiển thị menu tài khoản
                      console.log('Người dùng đã đăng nhập, hiển thị menu tài khoản...');
                      // Thêm mã để hiển thị menu tài khoản ở đây nếu cần
                    }
                  });
              
                  // Xử lý sự kiện click vào nút Đăng xuất
                  logoutLink.addEventListener('click', function() {
                    localStorage.removeItem('loggedInUser');
                    alert('Đăng xuất thành công!');
                    window.location.href = window.location.href;// Tải lại trang để cập nhật giao diện
                  });
                });
              </script>
              <div id="header_box_Gio_hang">
                <button id="cartButton" type="button" class="btn position-relative" >
                  <a href="cart.html">
                    <img src="images/shopping-cart.png" alt="Giỏ hàng" />
                    <span id="cartBadge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                      0
                      <!-- Số lượng sản phẩm trong giỏ hàng (ban đầu là 0) -->
                    </span>
                  </a>
                </button>
              </div>
              <button class="btn btn-outline-secondary" style="width: 27%;" id="darkModeToggle">
                <i class="fa-solid fa-circle-half-stroke"></i>
              </button>
            </div>
          </div>
        </div>
        <!-- End Header -->
      </div>
      <!-- End Phần Đầu -->
<!-- Bắt đầu Phần Giữa -->
        <!-- Bắt đầu Phần Giữa -->
    <div class="chitietnhieusanpham">
      <div class="chitietnhieusanpham-tieude">
        <hr>
        <h1 class="text-center">TRANG SỨC JDT</h1>
        <hr>
      </div>
      <div class="chitietnhieusanpham-loc row text-center">
        <button type="button" class="btn btn-outline-success col-auto active" data-sort="popular">Mua nhiều nhất</button>
        <button type="button" class="btn btn-outline-danger col-auto" data-sort="low-to-high">Giá từ thấp đến cao
        </button>
        <button type="button" class="btn btn-outline-info col-auto" data-sort="high-to-low">Giá từ cao đến thấp</button>
      </div>
      <div class="container text-center">
        <div class="row row-cols-2 row-cols-lg-4 g-2 g-lg-3">
          <!-- Sản phẩm sẽ được hiển thị ở đây -->
        </div>
      </div>
      <div class="chitietnhieusanpham-tieude" style="margin-top: 7%;">
        <hr>
        <h1 class="text-center">CHẤT LƯỢNG HÀNG ĐẦU</h1>
        <hr>
      </div>
    </div>
    <!-- End Phần Giữa -->

    <div id="phan_cuoi">
  <script>
    // Dữ liệu sản phẩm với link chi tiết và id
    const products = [
    {
        id: 25,
        name: "Sapphire Bracelet",
        price: 33900000,
        image: "images/SPV1/1.avif",
        detailLink: "25.html?id=25"
    },
    {
        id: 26,
        name: "Emerald Ring",
        price: 97900000,
        image: "images/SPV2/1.avif",
        detailLink: "26.html?id=26"
    },
    {
        id: 27,
        name: "Diamond Necklace",
        price: 72900000,
        image: "images/SPV3/1.avif",
        detailLink: "27.html?id=27"
    },
    {
        id: 28,
        name: "Pearl Bracelet",
        price: 199900000,
        image: "images/SPV4/1.avif",
        detailLink: "28.html?id=28"
    },
    {
        id: 29,
        name: "Ruby Pendant",
        price: 43900000,
        image: "images/SPV5/1.avif",
        detailLink: "29.html?id=29"
    },
    {
        id: 30,
        name: "Gold Earrings",
        price: 50900000,
        image: "images/SPV6/1.avif",
        detailLink: "30.html?id=30"
    },
        {
        id: 31,
        name: "Sapphire Bracelet",
        price: 373900000,
        image: "images/SPV3/1.avif",
        detailLink: "31.html?id=31"
    },
    {
        id: 32,
        name: "Emerald Necklace",
        price: 83900000,
        image: "images/SPV4/1.avif",
        detailLink: "32.html?id=32"
    },
    {
        id: 33,
        name: "Ruby Ring",
        price: 276900000,
        image: "images/SPV5/1.avif",
        detailLink: "33.html?id=33"
    },
    {
        id: 34,
        name: "Diamond Earrings",
        price: 153900000,
        image: "images/SPV6/1.avif",
        detailLink: "34.html?id=34"
    },
    {
        id: 35,
        name: "Topaz Brooch",
        price: 99900000,
        image: "images/SPV1/1.avif",
        detailLink: "35.html?id=35"
    },
    {
        id: 36,
        name: "Opal Cuff",
        price: 273900000,
        image: "images/SPV3/2.avif",
        detailLink: "36.html?id=36"
    }
    ];


// Hàm render sản phẩm
function renderProducts(products) {
  const productContainer = document.querySelector('.chitietnhieusanpham .row.row-cols-2');
  productContainer.innerHTML = '';

  products.forEach((product, index) => {
    const productHTML = `
      <div class="col" id="product-${product.id}"> 
        <div class="p-3">
          <div class="card" style="width: 100%;">
            <img src="${product.image}" class="card-img-top" alt="${product.name}">
            <div class="card-body">
              <h5 class="card-title">${product.name}</h5>
              <p class="card-text">${product.price.toLocaleString()}đ</p>
              <div class="d-flex justify-content-between align-items-center">
                <a href="${product.detailLink}" class="btn btn-warning flex-grow-1">Chi tiết</a>
              </div>                        
            </div>
          </div>
        </div>
      </div>
    `;
    productContainer.innerHTML += productHTML;
  });
}

// Xử lý sự kiện click cho các nút sắp xếp
window.addEventListener('load', () => {
  const sortButtons = document.querySelectorAll('.chitietnhieusanpham-loc button');
  sortButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Xóa class "active" khỏi các nút khác
      sortButtons.forEach(b => b.classList.remove('active'));
      
      // Thêm class "active" cho nút được click
      button.classList.add('active');
      
      const sortBy = button.dataset.sort;
      switch (sortBy) {
        case 'low-to-high':
          products.sort((a, b) => a.price - b.price);
          break;
        case 'high-to-low':
          products.sort((a, b) => b.price - a.price);
          break;
        case 'popular':
          products.sort((a, b) => {
            if (a.category === 'popular' && b.category !== 'popular') {
              return -1;
            } else if (a.category !== 'popular' && b.category === 'popular') {
              return 1;
            } else {
              return 0;
            }
          });
          break;
        default:
          break;
      }
      renderProducts(products);
    });
  });

  // Hiển thị sản phẩm mặc định khi trang được tải
  renderProducts(products);
  updateCartBadge(); // Cập nhật badge khi tải trang
});
  </script>
        <!-- End Phần Giữa -->
        <div id="phan_cuoi">
            <div id="footer">
                <div id="footer_left">
                    <div>
                        <p>© 2024 Công Ty Cổ Phần Vàng Bạc Đá Quý JDT</p>
                        <p><img src="images/map.png" alt=""> 140 Lê Trọng Tấn, Tân Phú, TP.HCM</p>
                        <p><img src="images/phone-book.png" alt=""> SĐT : 0975088626</p>
                        <p><img src="images/email.png" alt=""> Contact : contact@jdt.vn</p>
                    </div>
                </div>
                <div id="footer_mid">
                    <h5>DỊCH VỤ KHÁCH HÀNG
                        <hr>
                    </h5>
                    <ul>
                        <li><a href="">Điều khoản và điều kiện</a></li>
                        <li><a href="">Chính sách trả hàng hoàn tiền</a></li>
                        <li><a href="">Chính sách giao hàng</a></li>
                        <li><a href="">Chính sách quyền riêng tư</a></li>
                    </ul>
                </div>
                <div id="footer_mid">
                    <h5>THÔNG TIN CHUNG
                        <hr>
                    </h5>
                    <ul>
                        <li><a href="">Tin trang sức</a></li>
                        <li><a href="">Quyền lợi thành viên</a></li>
                        <li><a href="">Ưu đãi khi đánh giá</a></li>
                    </ul>
                </div>
                <div id="footer_right">
                    <h5>THEO DÕI CHÚNG TÔI
                        <hr>
                    </h5>
                    <div class="footer_right_1">
                        <img src="images/facebook.png" alt="">
                        <img src="images/instagram.png" alt="">
                        <img src="images/twitter.png" alt="">
                        <img src="images/threads.png" alt="">
                    </div>
                    <h5>XEM THÊM TẠI
                        <hr>
                    </h5>
                    <div class="footer_right_2">
                        <img src="images/youtube.png" alt="">
                        <img src="images/social-media.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Lưu trữ URL hiện tại vào sessionStorage khi trang được tải
        window.addEventListener('load', () => {
          if (window.location.pathname !== '/SignIn-SignUp/index.html') { 
            sessionStorage.setItem('returnURL', window.location.href);
          }
        });
      </script>

    <script src="../app.js"></script>
    <script src="bootstrap-5.3.3-dist/js/bootstrap.min.js"></script>
    <script src="js/cart.js" type="text/javascript" charset="utf-8"></script>
    <script src="slick/slick.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/cart.js" type="text/javascript" charset="utf-8"></script>
    <script src="slick/slick.min.js" type="text/javascript" charset="utf-8"></script>
</body>

</html>